
Задание 4. КЕШИРОВАНИЕ

Создаются два шарда mongodb, каждый в кластере mongodb из трех хостов.

1. Создание контейнеров

docker compose -f compose.yaml up

2. Настройка

Запустить скрипт ./config-check.sh
Скрипт:
- инициализируется шардирование в mongo
- инициализируется репликация в mongo
- инициализируется репликация в redis
- создаются тестовые данные через ендпойнт приложения
- запрос подсчета записей в шардах

3. Замечено

Если повторно создавать контейнеры, может возникнуть ошибка вида:
MongoServerError[AlreadyInitialized]: already initialized

Перед повтором п. 1 удалить вольюмы:
docker volume rm $(docker volume ls -q)

4. Ошибка

Не отрабатывает запрос списка пользователей http://localhost:8080/helloDoc/users с ошибкой Internal Server Error. 
Лог с ошибкой в файле error.log. 
Остальные запросы отрабатывают.
